# CHANGELOG

## 2.6xx

- Update GNUmakefile: Fix "dos2unix" target
- Convert CHANGELOG to Markdown
  - Update CHANGELOG.md: Fix spelling with hunspell
  - Merge pull request #115 from johnsonjh/deepsource-transform-1d6981d0
    - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
      standardjs, prettier and rubocop
  - Update CHANGELOG.md: Indentation
  - Update CHANGELOG.md: Fix conversion errors, minor updates
- Update .deepsource.toml: Exclude Attic from checks
- Merge pull request #113 from johnsonjh/deepsource-transform-62cab989
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update README.md, SECURITY.md: Normalize docs
- Update GNUmakefile: Simplify comments, line length
- Reorganize source: mkclean.bat -> Attic
- Merge pull request #111 from johnsonjh/deepsource-transform-49792d92
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update SECURITY.md: Reformatting
- Update README.md: Single to double quote include
- Restyle source
  - Restyled by whitespace
  - Restyled by clang-format
  - Restyled by astyle
- Move library sources into subdir src/
- Move example sources and example_make into subdir examples/
- Merge pull request #110 from johnsonjh/deepsource-transform-e6cd354a
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update SECURITY.md: Expand contacts, add PGP info
- GNUmakefile: Allow overriding OS X default prefix
- GNUmakefile: For OS X, use prefix of "/opt/duma"
- Merge pull request #104 from johnsonjh/README/X002-Simplify
- Merge pull request #105 from johnsonjh/restyled/README/X002-Simplify
  - Restyled by prettier-markdown
- Update README.md
- Merge pull request #100 from johnsonjh/restyled/pull-99
- Merge pull request #99 from hayguen/shell_script
- Merge pull request #102 from johnsonjh/SECURITY/X00-C
- Merge pull request #103 from johnsonjh/restyled/SECURITY/X00-C
- Restyled by prettier-markdown
  - Format code with standardrb, standardjs, gofmt, yapf, autopep8, isort,
    rubocop, prettier and black
- Update SECURITY.md
- Generate duma.sh, to have absolute path to installed shared library
  - Restyle duma.sh with shfmt
- Update make_git_source_version.sh: Styling
- Update make_git_source_version.sh: Don't redirect rm
- Update make_git_source_version.sh: Emacs & vim settings
- Update make_git_source_version.sh: Pedantic error checks
- Update make_git_source_version.sh: error checking; POSIX
- Update README.md: Restore GitLab link, close #73
- Update README.md: ‑ (use non-breaking dash)
- Update README.md: Display `0` as mono-space
- Update README.md: Fix spacing
- Update README.md: Indent FOSSAbot scan item
- Update README.md: Normalize Markdown spacing
- Update README.md: `_` -> `﹎`
- Update README.md: Hide GitLab until closing #73
- Merge pull request #96 from johnsonjh/deepsource-transform-fba48e62
  - Format code with standardrb, standardjs, autopep8, isort, rubocop,
    prettier, black, gofmt and yapf
- Update README.md: Enhance readability, fix headers
- Remove TODO: Closes #70
- Update TODO: Refer to #95
- Update TODO: Refer to #94
- Update TODO: Refer to #93
- Update TODO: Refer to #92
- Update TODO: Refer to #90
- Update TODO: Refer to #89
- Update TODO: Refer to #88
- Update TODO: Refer to #87
- Update TODO: Refer to #86
- Update TODO: Remove items now in issue tracker
- Update TODO: Refer to #85
- Update TODO: Refer to #84
- CHANGELOG: Use `git-changelog`; manually triggered
- Update README.txt: Remove alt tag spaces
- Update README.md: Update lgtm analysis badging
- Update stacktrace/printStackTrace.cpp: Refer to #81
- Update duma.h: Refer to #82
- Update multi: Quiet TickGit
- Merge pull request #80 from hayguen/master
- Fix warning: https://github.com/johnsonjh/duma/issues/76
- Merge pull request #79 from johnsonjh/restyled/pull-78
  - Restyled by clang-format
  - Restyled by astyle
- Fix warning: https://github.com/johnsonjh/duma/issues/77
- Update README.md: Clarify text
- Update GNUmakefile: Remove shar target
- Merge pull request #74 from johnsonjh/deepsource-transform-162cfcd9
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update README.md: Simplify header section titles
- Update TODO: Reference GitHub #70
- Update TODO: Remove verified completed items
- Update TODO: Remove obsolete service reference
- Update multi: process code with `expand`; remove TODO
- Update TODO: Remove item redundant by #65 and #64
- Update TODO: Reference GitHub #65
- Update TODO: Reference #64
- Update TODO: Remove {s,p,q,b}make references
- Update TODO: Remove obsolete compiler references.
- Update TODO: Remove ICC (now DPC++) - it works.
- Update TODO: Fix DMCC and OWC URLs
- Update TODO: Add notes
- Update README.md: Remove comment newlines
- Merge pull request #68 from johnsonjh/deepsource-transform-de75b352
- Merge pull request #67 from johnsonjh/deepsource-transform-769b82fe
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update README.md: Remove redundant header emphasis
- Update README.md: Process with markdown-toc
- Update README.md: Small reorganization
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update README.md: Process with markdown-toc
- Update README.md: Prepare for markdown-toc
- Rename: docs-data -> docs; builddocs.bat to Attic
- Attic: refactoring.sh -> Attic/refactoring.sh
- Merge pull request #57 from johnsonjh/restyled/pull-56
- Update GNUmakefile: C++-11 compilation mode w/g++
- Update duma.c: Adjust include ordering
- Merge pull request #59 from johnsonjh/deepsource-transform-80543723
- Merge pull request #61 from johnsonjh/deepsource-transform-6eb76d71
- Merge pull request #62 from
  johnsonjh/restyled/deepsource-transform-6eb76d71
- Merge pull request #60 from
  johnsonjh/restyled/deepsource-transform-80543723
  - Restyled by prettier-markdown
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Rebase and merge - Restyling by prettier-markdown
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
  - Restyled by prettier-markdown
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update README.md: Incorporate #52 and #53.
- Update README.md: Incorporate #52 and #53.
  - Restyled by whitespace
  - Restyled by shfmt
  - Restyled by shellharden
  - Restyled by clang-format
  - Restyled by astyle
  - Restyled by prettier-markdown
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Added CMake targets install and uninstall
- Add initial CMake support +fixes
- Update README.md: Fix-up conversion, correct typos
- Rename: Attic/README.txt -> Attic/README_orig.txt
- Update GNUmakefile: Install Markdown-ified doc
- Merge pull request #49 from johnsonjh/restyled/pull-48
  - Restyled by prettier-markdown
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update CHANGELOG
- Update README.md: Commit first attempt at (mostly automated)
  Markdown-ification.
  - Restyled by clang-format
  - Restyled by astyle
- Fix compilation warnings with gcc-9.3; changes in createconf on addr
- Update README.md
- Stow old comparisons to make way for overhaul.
- Update CHANGELOG: Document Attic
- Merge pull request #46 from johnsonjh/deepsource-transform-c20ce809
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- Update 42Crunch/api-security-audit-action action to v2
- Update codacy/codacy-analysis-cli-action action to v3.0.3
- Update codacy/codacy-analysis-cli-action action to v3.0.2
- Update codacy/codacy-analysis-cli-action action to v3.0.1
- Create Attic: Store detours and kduma for now.
- Merge pull request #37 from
  johnsonjh/renovate/codacy-codacy-analysis-cli-action-3.x
- Update codacy/codacy-analysis-cli-action action to v3
- Merge pull request #36 from jhjv/patch-1
- Update README.md: Fix code size badge
- Merge pull request #35 from johnsonjh/renovate/actions-setup-java-2.x
- Update actions/setup-java action to v2
- Update GNUmakefile: Remove "a.out" during clean.
- Update README.md: SourceHut: Link to project page
- Update README.md: Add links to GitLab mirror.
- Add .gitattributes to configure GitHub Linguist.
- Merge pull request #34 from johnsonjh/deepsource-transform-3b52b849
  - Format code with black, gofmt, yapf, autopep8, isort, standardrb,
    standardjs, prettier and rubocop
- README.md: Remove duplicated Codacy badging.
- Merge pull request #33 from
  johnsonjh/renovate/codacy-codacy-analysis-cli-action-2.x
  - Update codacy/codacy-analysis-cli-action action to v2.0.1
- Merge pull request #32 from
  johnsonjh/renovate/codacy-codacy-analysis-cli-action-2.x
- Normalize some code styling with clang-format.
- Scripts: Reformat
- Update codacy/codacy-analysis-cli-action action to v2
- README: Correct link title
- Update contact info and documentation.
- Switch to git-changelog generated CHANGELOG (manually triggered for now)
  (2021-05-30, JJ)
- Stow README.txt, add initial Markdown conversion.
- Create Attic: Store Detours and kduma for now.
  (2021-05-28, JJ)
- Stow away old comparison data; prepare for overhaul.
  (2021-05-28, JJ)

## 2.5.21

- Update contact information and documentation.

## 2.5.20

- Typo fix and build system updates - nothing functional.

## 2.5.19

- Updated scripts, Debian release info, minor changes.

## 2.5.18

- Beta tagged, not released.

## 2.5.17

- Updated README with extra history and information.
  (2020-12-15, JJ)
- Added SECURITY.md: New Security Policy for bug reporting.
  (2020-12-15, JJ)
- Added LICENSE: Merged COPYING-GPL and COPYING-LGPL.
  (2020-08-25, JJ)
- Updated TODO with items from 2009-12-30 by Daniel Trebbien.
  (2020-08-25, JJ)
- Updated TODO with items from 2008-05-23 by Michael Eddington.
  (2020-08-25, JJ)
- No longer build test programs (for now) to unbreak static builds.
  (2020-08-24, JJ)
- Applied various update patches from the Buildroot Project.
  (2020-10-28, JJ)
- Applied a patch from Swati Kumari for additional NULL checks.
  (2015-07-30, JJ)
- Applied a patch for bug ID #3035145 from Reinhard Katzmann.
  (2010-07-26, JJ)
- Applied a patch for bug ID #2923784 from Daniel Trebbien.
  (2009-12-30, JJ)
- Applied a patch for bug ID #2923779 from Daniel Trebbien.
  (2009-12-30, JJ)
- Applied a patch for bug ID #2831348 from an anonymous SourceForge user
  (2009-07-23, JJ)

## 2.5.16

- Add memmove() implementation based on memove() from klibc by Andris Zeila:
  http://sf.net/tracker/?func=detail&aid=2792252&group_id=149725&atid=775376
  (2009-05-21, HA)
- Fixed "Broken build in Msys and C++ tests fail"
  - Fixed USE_WIN32_CRIT_SECT implementation in sem_inc.c
  - Added make section for OSTYPE=msys-sh, which uses mingw32-gcc/g++
- Use USE_WIN32_CRIT_SECT implementation for Cygwin, fixes testoperator
  (2009-05-23, HA)
- Remove CVS sub-directories from packaging
- Removed debian sub-directory from CVS
  (2009-06-07, HA)
- Fixed "Wrong LD_PRELOAD path in duma.sh". see
  https://sf.net/tracker/?func=detail&aid=2800139&group_id=149725&atid=775376
  (2009-06-12, HA)
- Fixed "GNUmakefile is missing DESTDIR" using submitted patch:
  https://sf.net/tracker/?func=detail&aid=2800137&group_id=149725&atid=775376
- Moved definition of MAN_INSTALL_DIR and DOC_INSTALL_DIR in GNUmakefile
  after definition of prefix
  (2009-06-15, HA)
- Removed GNUmakefile option "DUMA_SEMAPHORES"
  (2009-06-14, HA)

## 2.5.15

- Added alternative locking implementation in sem_inc.c using critical
  sections. Code from Peter Harris, see:
  http://code.google.com/p/electric-fence-win32/
- Added Windows Threading to testmt.c
- Added win32-msvc.net project file
- Use of WIN32_SEMAPHORES on Win32-Cygwin in sem_inc.c
  - The locking mechanism for multi-threading, with this configuration
    testmt.c works either with pthreads and with the Win32 API
- CreateSemaphore() now used with maximum count = initial count = 1
  (2008-08-03, HA)
- Removed usage of strlen() in strncpy()
  (2009-03-19, HA)
- Add patch from [Andre Landwehr](mailto:andrel@cybernoia.de) which fixes
  race condition when using preprocessor macro 'delete'
  (2009-04-07, HA)
- Fix bug in strncpy(): Roman Jokl reported the bug, error check was
  too rigorous
  (2009-04-11, HA)

## 2.5.14

- Added suggested ~/.gdbinit as gdbinit.rc
- Added hint in mprotectFailed()
- Removed (gcc) compiler warnings
- Rename of sem_inc.h to duma_sem.h, cause needed by dumapp.h
  (2008-03-12, HA)
- Update of README for Microsoft's pageheap.exe, a heap debugging tool
  (2008-04-20, HA)
- PATCH from [Philip Mucci](mailto:mucci@cs.utk.edu) on behalf
  of SiCortex
  - Fix for malloc(0) which previously always returned NULL.
  - Added environment switch DUMA_MALLOC_0_STRATEGY, which may return a
    special protected piece of memory for malloc(0)
  - Moved malloc/SHOW_ALLOC printouts before all abort checks
    (2008-04-20, Philip Mucci, HA)
- Remove some warnings for "-Wall -Wextra" especially for Cygwin
- Detailed some messages when source file-name and line no were available
  (2008-04-21, HA)
- Removed environment variable "DUMA_ALLOW_MALLOC_0",
  "DUMA_MALLOC_0_STRATEGY = 0" is equivalent to previous
  "DUMA_ALLOW_MALLOC_0 = 0", default is 3.
  (2008-04-22, HA)
- Return unique pointer for C++ operator new for
  "DUMA_MALLOC_0_STRATEGY == 3". Now it should be really standards
  conforming.
  (2008-04-26, HA)
- Fix for C++ operator new with size zero added environment switch
  "DUMA_NEW_0_STRATEGY"
  (2008-04-27, HA)

## 2.5.13

- PATCH(es) from [Philip Mucci](mailto:mucci@cs.utk.edu)
  of [SiCortex](http://sicortex.com):
  - Fix for pthread_self() and hang of testoperators test case on 64 bit
    Linux platforms (x86_64 and MIPS64)
  - Added -Wall to Makefile
  - Properly versioned symbolic library to have the version triple 0.0.0
  - Removed control-M's from the sources. Please do not ship UNIX sources
    with control-M's (stop editing on Windows)
  - Make sure ranlib is run on the static library, various platforms
    require this
  - Add -DPIC for shared library builds
  - Added install targets for headers (INC_INSTALL_DIR)
  - Added install targets for documentation (DOC_INSTALL_DIR)
  - Added separate 'make test' target
  - Added proper install target that also refers to GNU standard DESTDIR
    usage
  - Added 'distclean clobber' targets to remove configuration
  - Added 'reconfig' target to regenerate duma_config.h
  - Changed Makefile flow to recursively run if duma_config.h doesn't
    exist
  - Fixed return value error in testmt.c
  - Fixed args in thread-test.c
- Updated Makefile: updated PACKAGE_SOURCE and added target dos2unix
  (2008-03-09, HA)

## 2.5.12

- Enhancement: added environment variable 'DUMA_CHECK_FREQ' to automatically
  check all memories no man's land at each n'th allocation/deallocation,
  n=0 to deactivate automatic checks.
  (2008-01-24, HA)
- Updated README.txt for environment variables DUMA_CHECK_FREQ and
  DUMA_SKIPCOUNT_INIT.
  (2008-01-25, HA)

## 2.5.11

- Bugfix on thread safety in sem_inc.c, thanks to Andrew Kornev writing the
  right hint as bug-report: "[ 1875926 ] non-thread safe lock() implementation"
  (2008-01-20, HA)

## 2.5.10

- Added small test program to demonstrate crashing on multi-threaded
  programs from
  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=67838
  (2008-01-15, HA)
- Added HTML comparison charts/text and C source code examples from
  http://www.cs.utexas.edu/~jpmartin/memCheckers.html
  into subdir comparisons with kind permission of Jean-Philippe Martin
- Added Makefile for each C source file
  (2008-01-14, HA)
- Bugfix for Makefile target install, when DUMASO is empty, bug was reported
  from Louis Strous
  (2008-01-09, HA)
- Added hint where no man's land was overwritten below or above userSpace
  (2008-01-03, HA)

## 2.5.9

- Added link to mpatrol in README
- Added shell environment variable 'DUMA_SKIPCOUNT_INIT'
  (2007-08-22, HA)
- Added section for NetBSD in Makefile; there is always 1 memory leak on
  NetBSD-3.1 but the functionality works
  (2007-08-28, HA)
- Tested on powerpc-apple-darwin8.0.0 inside of PearPC 0.4 (Windows):
  - Compiles and passes all confidence tests. trying to debug example1
    from within gdb crashes whole PearPC; running without gdb creates a
    core dump one can analyze afterwards with gdb.
    (2007-09-02, HA)
- Bugfix for \_duma_strncpy(): no more call to strlen(), reported by
  [Kamall Neet](mailto:kamalneet@gmail.com)
- Applied patch from [Eddy Pronk](mailto:epronk@users.sourceforge.net)
  submitted to SourceForge with title "libduma.so on Solaris"
  (2007-11-13, HA)
- Added minor error check in print.c about DUMA_OUTPUT_FILE
- Some comments in duma.h and dumapp.h
  (2007-12-23, HA)

## 2.5.8

- Fix: set DUMA_PREFER_GETENV for OS X; it doesn't link with environ
- Fix: MinGW wanted exact declaration as in definition for
  function DUMA_strerror in print.h
- Fix: workaround testmt.c to compile on Windows
- Fix: call duma_init() ifdef DUMA_EXPLICIT_INIT in testoperators.cpp
- Added notes on prepackaged .rpm files provided by
  [Dries Verachtert](mailto:dries@ulyssis.org) at
  http://dries.ulyssis.org/apt/packages/duma/info.html
  (2007-08-17, HA)
- Added environment variable 'DUMA_REPORT_ALL_LEAKS' defaulting to 0.
- Added empty definitions for macro functions DUMA_SET_ALIGNMENT(),
  DUMA_SET_PROTECT_BELOW() and DUMA_SET_FILL()
- Updated README on shell environment variable options, added some entries
  to section 'OTHER ALTERNATIVE/ADDITIONAL DEBUGGING SOFTWARE/TOOLS' and
  added section 'COMPILATION NOTES FOR RELEASE/PRODUCTION'
  (2007-08-18, HA)
- Add single line function 'duma_alloc_return()'; all memory allocated from
  DUMA is returned through this function. This allows you to set a
  conditional break-point on this function to catch a specific allocation
  (2007-08-19, HA)

## 2.5.7

- Reformatting: converted tabs to spaces
- Added test program testenv.c using global environ variable as alternative
  to getenv()
  (2007-08-15, HA)
- Added output of some configuration settings with banner
- Switched off leak detection in shared library for any platform. Use the
  static library for finding leaks - with information where the piece of
  memory got allocated. Meanwhile I think leak-checking without further
  information is quite useless! Too many correct programs don't free
  all memory, cause the system frees memory up at program end. Thus,
  too many platforms/environments are reported "broken" from DUMA.
- Output allocator type (malloc, strdup, ..) with leak report for each
  non freed memory block
- Removed option DUMA_USE_FRAMENO and the frameno variable; I suppose nobody
  is using it, but additionally it is not thread safe.
- Added option DUMA_PREFER_GETENV; if you prefer standard C library getenv()
  over global char \*\*environ
- Added function duma_check(void\*) and its macro DUMA_CHECK(): it checks the
  No Mans Land - especially the unprotected end - of the memory block
- Added function duma_checkAll() and its macro DUMA_CHECKALL(): it checks
  the No Mans Land - especially the unprotected end - of all allocated
  memory blocks
  (2007-08-17, HA)

## 2.5.6

- Modified example Makefile for not linking to pthreads on Windows
  (2007-08-12, HA)
- Added win32-msvc.net project file for testoperators.cpp
- Bugfix: obey for option DUMA_NO_LEAKDETECTION; check for this option
  before calling any non-existing operators with leak parameters
- Enhanced comments in Makefile for DUMA_SO\_\_ and DUMA_LIB\_\_ options
- Changes in Makefile to build dynamic library on OS CX
- Preloading duma library now works on OS C
- Added Debian Bug report logs - #241156 as testmt.c
  (2007-08-14, HA)

## 2.5.5

- Support for Solaris (Solaris 10 with the GNU tool-chain from Companion CD)
- Fix for Solaris: strerror() calls calloc() leading to recursion; added
  preprocessor option DUMA_NO_STRERROR
- Internal redesign:
  - Collected several global static variables to one structure and several
    global non static variables to other structure, each with prepended
    and appended protection space
    (2007-08-11, HA)

## 2.5.4

- Support for win32 mingw when calling make with OSTYPE=msys; call
  "mingw32-make OSTYPE=msys" from Windows command prompt having added the
  PATH for MINGW/bin
  (2007-07-28, HA)
- Echo single dot '.' for windows command shell
  (2007-07-31, HA)

## 2.5.3

- Added simple Makefile for examples in subdir example_makes/ex\*/
- Modified Makefile to avoid build of shared libs/executables specific to OS
- dumapp.h now keeps C macro definitions
- Support for max OS CX when calling make with OS=OS X
- Support for win32 Cygwin when calling make with OSTYPE=cygwin
  (2007-07-14, HA)
- Bugfix in createconf.c for Win32 but non Visual C++
- Cygwin work:
  - switched off stacktrace (before trying to integrate in Makefile)
  - caddr_t and u_int were already defined
  - use signals as on Linux/Unix in dumatest.c
  - updated Makefile
    (2007-07-13, HA)

## 2.5.2

- Other minor corrections
- Added preprocessor option "DUMA_SEMAPHORES" to select pthreads, locking
  mechanism: semaphores or mutexes
- Removed automatically generated visual c++ file detoursexample1.ncb
  from CVS and archives
  (2007-07-12, HA)

## 2.5.1

- Turned global variables DUMA_PROTECT_BELOW, DUMA_ALIGNMENT and DUMA_FILL
  to thread local variables. Access now with new function macros
  DUMA_SET_ALIGNMENT(), DUMA_SET_PROTECT_BELOW(), and
  DUMA_SET_FILL()
- Support for posix_memalign()
- Add pthread_mutex implementation alternative to semaphores
  (2007-07-03, HA)

## 2.5.0

- Documentation updates. Now using Natural Docs
  - Win32-specific fixes:
    - Detours support for using DUMA with just binaries
    - Compile a duma DLL
    - DUMA can perform stack traces of each allocation
    - Support for Visual Studio 2005
    - Support for output to debug console
- Support for output to a file
- Can control output via environmental variables

## 2.4.28

- Enhancement: reworked initialization for Request-ID 1458083 on SF
  checks for recursive calls in \_duma_init() and duma_init()
  (2006-06-17, HA)
- Bugfix in new[] operators occurred on alpha-linux1 on sf compile farm
  (2006-06-18, HA)
- Fix in Makefile: DUMA_OPTIONS was not used when compiling createconf.o
- Fix compile error when DUMA_NO_LEAKDETECTION was set in testoperators.cpp
- Fix to obey EXPLICIT_INIT in testoperators.cpp
  (2006-06-18, HA)
- Fix: as in Request-ID 1482267 on SF: updated install directory for manual:
  $prefix/share/man/man3 should fit the Filesystem Hierarchy Standard 2.3
  for /usr and /usr/local
  (2006-06-18, HA)

## 2.4.27

- This version is now reachable via CVS on sourceforge.net

## 2.4.27

- Published a German article on DUMA on http://duma.sourceforge.net/
- Bugfix: Removed buffer overflow in DUMA_sprintf() for long file names:
  - Added parameter maxsize for output buffers in some functions.
  - Incremented STRING_BUFFER_SIZE to reduce this risk.
    This bug was reported by <mailto:loigu@volny.cz>
    (2006-01-09, HA)

## 2.4.26

- New project file for Dev-C++ 4.9.9.2 for createconf from
  [Benjamin Berkels](mailto:benjamin.berkels@ins.uni-bonn.de)
- Bugfix/enhancement: avoid recursion from sem_init() in Linux/U\*ix where
  sem_init() may call malloc() which again calls semaphore locking
  (2005-10-25, HA)
- Bugfix in delete macro: Magic must be a single variable! Bug was reported
  by [Benjamin Berkels](mailto:benjamin.berkels@ins.uni-bonn.de)
- Some more TLS preparation
  (2005-10-28, HA)

## 2.4.25

- Bugfix: semaphores were not initialized correctly; this lead to a hang.
  Thanks for reporting and providing a test environment to
  [Tim Braun](mailto:braun@informatik.uni-kl.de)
- Updated project files for Dev-C++ 4.9.9.2 / GCC 3.3.1 and bug-fixed compiler
  error for Dev-C++/gcc both reported from
  [Benjamin Berkels](mailto:benjamin.berkels@ins.uni-bonn.de)
- Modified delete macros
- DUMA_Magic now array (call_depth)
  (2005-10-21, HA)

## 2.4.24

- New program testoperators: writes its own member new/delete operator with
  file-name and line number forwarding to DUMA
- Reworked Makefile: added tstheap_so which runs with shared library output
  in banner now shows which library (static/shared) is used
  (2005-10-09, HA)

## 2.4.23

- Write DUMA's preprocessor flags at compile time of the library to
  duma_config.h. Thus one no more would have to provide the same flags when
  compiling his own objects files.
  - Changed Makefile, to take care for this
    (2005-10-07, HA)

## 2.4.22

- C++ 'new' operators now (more) standard conforming; allocation of
  size==0 now returns non 0 pointer
- New option 'DUMA_SUPPRESS_ATEXIT' as environment variable from
  [Tim Braun](mailto:braun@informatik.uni-kl.de): suppress call to C
  library's atexit() function for DUMA's leak checking function in buggy
  environments, where atexit() hangs.
- Implemented alternative for C library's atexit() using GNU C compiler's
  'destructor' function attribute.
- New preprocessor flag 'DUMA_PREFER_ATEXIT' in Makefile
- Updated project files for Dev-C++ 4.9.9.2 / GCC 3.3.1 from
  [Benjamin Berkels](mailto:benjamin.berkels@ins.uni-bonn.de)
- Updated TODO
- Bugfix: "EF\_" was not replaced by "DUMA\_" in tstheap.c
- Bugfix: rules how to build test objects; DUMA_OPTIONS were not passed
  (2005-10-06, HA)

## 2.4.21

- Modified Makefile: name for shared library and symbolic links now
  configurable at start
- Update README
- Update TODO; sorted by priority
  (2005-10-04, HA)
- Bugfix: follow enum \_DUMA_FailReturn in \_duma_allocate() function
- Bugfix: initialize userAddr in \_duma_allocate() function may lead to bug
  when allocation failed new operators now (nearly) C++ conform
  (2005-09-29, HA)

## 2.4.20

- Integrated patches from [Zbynek Vyskovsky](kvr@centrum.cz)
  - Use tighter alignment when size is smaller than default alignment
  - Replaced calls to EF_Exit() by EF_Abort()
  - Modified README
    (2005-09-19 - 2005-09-23, ZV)
  - Reworked Zbynek's patch to use long in internal address calculations:
    - Auto-detect compatible integer types DUMA_ADDR and DUMA_SIZE in
      createconf. Write them to duma_config.h auto-detect
      DUMA_MIN_ALIGNMENT in createconf, write value to duma_config.h
    - Use auto-detected values in code reworked DUMA_sprintf() and its format
      specifier bug-fixed Makefile: DUMA_SO_OPTIONS also used DUMA_OPTIONS
      removed '-DDUMA_NO_CPP_SUPPORT', as LD_PRELOAD works for
      C++ new, new[], delete and delete[] operators
      (2005-09-24, HA)
- Bugfixed reduceProtectedMemory(): Windows VirtualFree(,,MEM_RELEASE) can
  only free whole allocations. not parts.
- Bugfix in memory allocation: try allocation in loop until
  reduceProtectedMemory() fails deallocating more memory; long running
  programs with much memory handling should benefit.
  (2005-09-26, HA)
- Added project files for Visual C++ .NET 2003
- Applied one more patch from Zbynek Vyskovsky concerning alignment his
  calculation of next lower power of 2 is much smaller
- Bugfix: return '(void\*)0' in \_duma_allocate(), when userSize==0
  (2005-09-27, HA)

## 2.4.19

- Fixed compile error in duma.c introduced in 2.4.18 fixed/enhanced Makefile
  (2005-09-19, HA)
- Added run-time check for DUMA_PAGE_SIZE from duma_config.h
  (2005-09-17, HA)
- Added check for initialization function "\_\_attribute ((constructor))"
  (2005-09-18, HA)

## 2.4.18

- Checked Source code: DUMA_get_sem() is nor more called, when
  DUMA_NO_THREAD_SAFETY is set splitted this document into two files:
  TODO and CHANGELOG
- Created INSTALL document
- Modified Makefile: added special rules for building shared library
  (2005-09-10, HA)
- Modified README
  (2005-09-16, HA)
- Removed option DUMA_FREE_WIPES
- Documented options in README:
  - DUMA_SLACKFILL
  - DUMA_MALLOC_FAILEXIT
  - DUMA_MAX_ALLOC
  - DUMA_FREE_ACCESS
  - DUMA_SHOW_ALLOC
  - DUMA_DISABLE_BANNER
- Add new preprocessor flag 'DUMA_NO_HANG_MSG' in Makefile
  (2005-09-16, HA)

## 2.4.17

- Forked Electric Fence cause Bruce Perens wrote:
  > Hayati Ayguen must choose another name for his program.
  > "Electric Fence" is a trademark he is not permitted to use.
- Opened a "new" project DUMA - Detect Unintended Memory Access:
  - Rename efence to duma
  - Rename Electric Fence to DUMA
  - Rename EF\_ to DUMA\_
  - Rename ef\_ to duma\_
  - Rename eff\_ to duma\_ \* and so on ...
    (2005-09-10, HA)

## 2.4.16

- Added examples for article portability: use standardized strerror() instead
  sys_nerr and sys_errlist[].
- Bugfix: error when defined EF_NO_LEAKDETECTION in \_eff_allocate()
- Bugfix: error when defined EF_NO_LEAKDETECTION in \_eff_deallocate()
- Enhancement: mark allocations from standard libraries before ef_init() is
  called with lineno = -1 to allow special treatment in leak_checking
- Changed default in eftest to use two signals: SIGSEGV and SIGBUS instead of
  single PAGE_PROTECTION_VIOLATED_SIGNAL
- Define functions (memcpy, strcpy, strcat) as non-intrinsic for Visual C++
  compiler in Release mode
  (2005-08-28, HA)
- Enhancement: allow alignments bigger than page size
  (2005-08-23, HA)
- Document EF_NO_THREAD_SAFETY preprocessor flag in Makefile
- Added EF_EXPLICIT_INIT preprocessor flag to workaround buggy environments.
  (2005-08-21, HA)

## 2.4.15

- Bugfixed page management under Windows: virtual address space never got
  released. Unfortunately, this "quick" fix avoids memory pooling
  under Windows.
- Remove double "Electric Fence:" messages when calling EF_Abort()
  or EF_Exit()
  (2005-07-24, HA)
- Added parameter ExitOnFail to Page_Create().
- Added warning when allocation failed and ExitOnFail is off.
  - Extended \_eff_allocate() for this; prepared new for standard conformity.
    (2005-07-20, HA)

## 2.4.14

- Integrated code from [Tim Braun](mailto:braun@informatik.uni-kl.de)
  - New EF_SHOW_ALLOC environment variable, which prints allocations and
    deallocation when variable set check if malloc() and free() are bound
    to efence
    (2005-07-15, HA)
- Integrated a patch from [Zbynek Vyskovsky](mailto:kvr@centrum.cz) in his
  words: "I modified Electric Efence a little, to be able to catch free-ing
  memory via watch point in debugger. The patch (attached) solves the
  problem when you are watching expression for change and suddenly
  realize the memory containing expression disappeared. It has no
  other effect, just makes debugging easier."
  (2005-07-11, HA)
- Bugfix for internal slot mode EFST_DEALLOCATED reported by Mikolas Patocka
  error occurred when userSpace memory region of freed memory is reused from
  system and freed again: efence claimed freeing already freed memory.
  (2005-03-02, HA)
- Defining macros/functions also for str[n]cpy() and str[n]cat() checking for
  overlapping memory regions.
  (2005-02-17, HA)
- Now defining macros/functions also for strdup(), memcpy().
- memcpy() checks if memory regions overlap.
  (2005-02-16, HA)
- Added EF_OLD_DEL_MACRO preprocessor flag to keep compatibility to old
  DEL_ELEM() / DEL_ARRAY() macros; when not defined a macro for "delete"
  is defined which has standard conforming syntax.
  (2005-02-14, HA)

## 2.4.13

- Added internal flag saving the source (allocation/deallocation) for
  file name and lineno.
- Added EF_OLD_NEW_MACRO preprocessor flag to keep compatibility to old
  NEW_ELEM() / NEW_ARRAY() macros. When not defined a macro for "new" is
  defined which has standard conform syntax. Unfortunately, you have to
  use DEL_ELEM/DEL_ARRAY further to utilize file name and line number
  of deallocation calls.
  (2005-02-10, HA)
- Reworked/revised ALL internal functions !!!
- Freeing already freed memory is now detected (much better)
- Disallows coalescing memory regions and also stores
  \_\_FILE\_\_ and \_\_LINE\_\_ of free() to be able to print position
  of first free.
- Added EF_USE_FRAMENO preprocessor flag. changed not to support
  EF_newFrame() and EF_delFrame() by default.
  (2005-02-07, HA)
- Applied bug-fix posted by Luis Gonzalez. Bug was occurring under SuSE Linux
  9.1 when calling eftest with a higher number (such as 10000.)
  (2005-02-02, HA)
- Bugfixed memalign() which was not exported as extern "C". this bug lead to
  crashes when freeing memory allocated by memalign(). Bug was reported by
  Grant Goodyear and Steven G. Johnson. Now defining macros/functions
  also for valloc()
  (2005-02-03, HA)

## 2.4.12

- Added EF_NO_GLOBAL_MALLOC_FREE preprocessor flag to workaround buggy
  environments: no malloc(), free(), realloc(), calloc() are put into the
  global name-space of the efence library, thus only files which include
  efence.h call the efence malloc(),.. replacement functions. This flag
  is also helpful where linking order cannot get controlled e.g. when
  memory is allocated from a library not using efence but free is
  called from efence using efence. this is a problem when using
  DLL libraries which are linked against msvcrt.dll and its
  malloc/free under MS Windows. The same problem applies
  when libstdc++ / libgcc is not linked in correct order.
  (2005-01-04, HA)

## 2.4.11

- Bugfixed signal handling in confidence test (eftest), which lead to false
  errors with my newly installed Mandrake Linux 10.1
  (2005-01-03, HA)
- Bugfixed checking at free(), when EF_PROTECT_BELOW flag changed which lead
  to false positives.
- Bugfixed error message output to stderr: length of messages were calculated
  too short. fixed functions EF_Abort() and EF_Exit().
  (2004-08-15, HA)

## 2.4.10

- Added preprocessor macros for CA_DECLARE, CA_DEFINE, CA_REF in efence.h
  for declaration, definition and reference to Checked Arrays. These macros
  allow checks of arrays which are allocated on stack, but they are very
  slow on references cause every reference has to be checked.
- Added EF_ASSERT() which definitely halts (for debugging)
- Precompiled headers have to be switched off in MS Visual C++ to get all the
  C++ operators to work, but don't ask me why!
- Implemented all the various new/delete/new[]/delete[] C++ operators. The
  implementations are not C++ conform concerning their behavior added type
  mismatch detection between malloc()/free(), new/delete, new[]/delete[].
  This is deactivated when EF_NO_LEAKDETECTION is set.
- Added EF_MALLOC_FAILEXIT parameter. (for now not implemented)
- Extended semantics of EF_PROTECT_FREE.
- Added EF_MAX_ALLOC parameter.
- Bugfix: why should we ever use Page_Delete() when setting up the
  "dead" page?
- Bugfix: EF_PROTECT_FREE did exactly the opposite of that, what it should
  do up from Bruce's version 2.2.2 maybe earlier.
  (2004-07-16, HA)
- Confidence test now PASS again
- Removed problems when used EF_NO_LEAKDETECTION preprocessor flag
- Makefile to work again, also included automatic generation of
  efence_config.h
- Added automatic generation and inclusion of efence_config.h instead
  function Page_Size()
  (2004-07-15, HA)
- Added code for thread safety: Only one thread at once is allowed to enter
  some internal functions. This can be deactivated using the
  EF_NO_THREAD_SAFETY preprocessor flag. There may be flaws concerning
  threads, when using the c++ operators for leak detection: use the
  EF_NO_LEAKDETECTION preprocessor flag if you encounter problems!
- Some files (page.c and print.c) have turned to header files, the needed
  functions are now declared static and are no more visible outside
  efence.c this way the NDEBUG preprocessor flag has been replaced by
  EF_NO_EFENCE, EF_NO_CPP_SUPPORT - be careful not to include
  efence in your release builds!
  (2004-03-21, HA)

## 2.4.9

- Added checks for no mans land (= space which cannot get protected from the
  MMU): this area gets filled with EF_FILL on allocation, and gets checked
  on deallocation.
  (2002-12-04, HA)

## 2.4.8

- One big fix and many improvements for C++ code. old macros NEW_ELEM,
  NEW_ARRAY were not usable when allocating classes, which have
  constructor/destructor. The usage of these macros has not changed.
  (See 2.4.3).
  (2002-12-04, HA)

## 2.4.7

- Support Borland Free Command-line Tools: Borland C++ Builder 5.5
  - Throw away unnecessary declarations of malloc(), free(), ..
    Borland didn't like them, and neither MS-Visual C++ 6.0 nor gcc
    (Dev-C++) needs them.
  - Added project files in subdir "win32-vide" for VIDE 1.24 using
    Borland C++ Builder 5.5 (see http://www.objectcentral.com)
    (2002-11-22, HA)

## 2.4.6

- Remove memory leak in eftest
- Allow re-inclusion of efence.h after inclusion of efenceint.h
- Added some project files in subdir "win32-devcpp" for Dev-C++ 4.9.6
  using gcc (see http://www.bloodshed.net) and saved its generated
  makefiles left tstheap's memory leaks
  (2002-11-17, HA)

## 2.4.5

- Modifications in print routines (EF_Print, EF_Abort, ..)
- Added direct output to visual c++ debug output window.
- Some additions to Makefile
  (2002-11-17, HA)

## 2.4.4

- Separation of c++ files: efencepp.h, efencepp.cpp
- Rename EF_push()/EF_pop() to EF_newFrame()/EF_delFrame()
- Add new compile option "EF_NO_LEAKDETECTION"
- Add new compile option "EF_NO_CPP"
- Split efence.h to efence.h and efenceint.h
- Add Copyright and License information to many files
- Rename COPYING to COPYING-GPL
  (2002-11-03, HA)

## 2.4.3

- Added following preprocessor Macros for Release and Debug Mode
  - #define NEW_ELEM(TYPE) new TYPE
  - #define NEW_ARRAY(TYPE,COUNT) new (TYPE)[COUNT]
  - #define DEL_ELEM(PTR) delete PTR
  - #define DEL_ARRAY(PTR) delete []PTR
    which are mapped to malloc() and free() in Debug Mode.
- Use these macros to get file name and line number of a C++ style memory leak.
  (2002-10-07, HA)

## 2.4.2

- Added support for implicit and explicit leak checking:
  - void EF_push(void) creates a new memory frame.
  - void EF_pop(void) checks for memory leaks allocated after EF_push();
    this function is called automatically onexit(), even without
    EF_push().
    (2002-10-07, HA)

## 2.4.1

- Port to Windows (NT/2000/XP) by adding sections to following functions:
  - Page_AllowAccess()
  - Page_Create()
  - Page_Delete()
  - Page_DenyAccess()
  - Page_Size()
    (2002-10-06, HA)

## 2.4.0

- Added support for C++ operators new, new[], delete and delete[].
- Added some project files in subdir "win32-msvc" for MS-Visual C++ 6.0
  (2002-10-03, HA)

## 2.2.2

- Oops. Shared library must be position-independent code.

## 2.2.0

- Merge in bug-fixes, multi-thread patch, shared library patch, debian/
  sub-directory used for building the Debian package

## 2.0.5

- Port to Linux.
  (1995-01-20)

## 2.0.4

- Don't attempt to allow access to a zero-sized page when
  EF_ALLOW_MALLOC_0 is set.
- Attempt to un-map memory from Page_Delete(). If that doesn't work, fall
  back by protecting the page from all references. Un-mapping small
  segments of a mapping used to crash my SGI IRIX 5.0 system. I assume
  that nobody is running 5.0 any longer.
  (1993-05-29)

## 2.0.3

- When realloc is passed a zero address, it should work the same way as
  malloc(). Fix forward declaration of mprotect() in page.c to use void \*,
  not caddr_t, for addresses. IRIX 5.0.1 complained about that.
  (1994-09-30)

## 2.0.2

- Add support for DEC Alpha. Add %a pattern for printing addresses, which
  assumes they are passed in a void \*.

## 2.0.1

- Add work-arounds for kernel and library bugs under HP-UX.
  - HP has been notified and will repair these soon.
